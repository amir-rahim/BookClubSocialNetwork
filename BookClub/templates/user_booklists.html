{% extends 'base_content.html' %}

{% block page_title %}
Book Lists
{% endblock page_title %}

{% block page_subtitle %}
View all book lists you've created
{% endblock page_subtitle %}

{% block content %}
<div class="columns">

  	<div class="column is-3">

		<aside class="menu is-hidden-mobile" style="padding-left: 15px;">

            <ul class="menu-list">
                <li><a href="{% url 'library_dashboard' %}">Dashboard</a></li>
            </ul>

            <p class="menu-label">Our Book Library</p>

            <ul class="menu-list">
                <li><a href="{% url 'library_books' %}">View Library</a></li>
            </ul>

            {% if user.is_authenticated %}
            <p class="menu-label">Book Lists</p>

            <ul class="menu-list">
                <li><a href="{% url 'booklists_list' username=user.username %}" class="is-active"><b>{{ user.get_username }} Book Lists</b></a></li>
                <li><a href="{% url 'create_booklist' username=user.username %}">Create Book Lists</a></li>
            </ul>
            {% endif %}

            <p class="menu-label">Recommender</p>

            <ul class="menu-list">
                <li><a href="#">AI Recommended Books</a></li>
            </ul>

            {% if user.is_authenticated %}
            <p class="menu-label">Reviews</p>

            <ul class="menu-list">
                <li><a href="{% url 'library_books' %}">View Personal Reviews</a></li>
            </ul>
            {% endif %}

        </aside>

	</div>
    <div class="column is-9">

        <nav class="breadcrumb" aria-label="breadcrumbs" style="padding-left: 5px;">
            <ul>
                <li><a href="{% url 'home' %}">Home</a></li>
                <li><a href="{% url 'user_dashboard' %}">{{ creator.username }}</a></li>
                <li><a href="{% url 'booklists_list' user.username %}">Book Lists</a></li>
            </ul>
        </nav>

        <section class="hero is-info welcome is-small" style="margin: 10px 0px;">
            <div class="hero-body">
                <div class="container">
                    <h1 class="title">Book Lists by {{creator.username}}</h1>
                </div>
            </div>
        </section>

        <div class="columns">

            <div class="column is-12">
              <div class="container">
                <table class="table is-fullwidth is-hoverable is-striped is-bordered">
                  <tbody>

                  {% for list in booklists %}
                    <tr onclick="window.location='{% url 'user_booklist' user.username list.id %}';" style="cursor:pointer;">
                      <td class="container">
                        {# <div class="box"> #}
                          <p class="is-medium"><strong><a href="#">{{list.title}}</a></strong></p>
                          {% if list.description %}<p>{{list.description}}</p>{% endif %}
                        {# </div> #}
                      </td>
                      {% if self %}
                        <td style="width:8%; text-align:right;">

                          <form method="get" action="{% url 'edit_booklist' booklist_id=list.id username=request.user.username %}">
                              <button class="button is-dark is-small" style="margin-right: 5px">
                                  <span>Edit</span>
                              </button>
                          </form>

                            {% include 'partials/delete_button_and_modal.html' with delete_item=list delete_modal_id=list.pk %}

                        </td>
                      {% endif %}
                      {# </td> #}
                    </tr>
                  {% empty %}

                  <div class="box">No lists. {% if self %}<a href="{% url 'create_booklist' user.username %}">Create one?</a>{% endif %}</div>

                  {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>

        </div>

    </div>

</div>
{% endblock %}
